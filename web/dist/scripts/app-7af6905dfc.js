!function(){"use strict";angular.module("donna",["ngAnimate","ui.router","oitozero.ngSweetAlert"]).run(["$rootScope","$state","Auth",function(s,a,e){s.$on("$stateChangeStart",function(s,t){e.authorize(t.data.access)||(s.preventDefault(),a.go("anon.login"))})}])}(),function(){"use strict";function s(s,a){return{getUsersList:function(){return s.post(a.URL+"/api/users")}}}angular.module("donna").factory("User",s),s.$inject=["$http","API"]}(),function(){"use strict";function s(s,a){var e=this;e.users=[],s.getUsersList().success(function(s){e.users=s}).error(function(s){a.swal(s.error,s.summary)})}angular.module("donna").controller("UserController",s),s.$inject=["User","SweetAlert"]}(),function(){"use strict";function s(s,a){return{getNewsList:function(){return s.post(a.URL+"/api/news")},destroyNews:function(e){return s.post(a.URL+"/api/news/destroy/"+e)}}}angular.module("donna").factory("News",s),s.$inject=["$http","API"]}(),function(){"use strict";function s(s,a){var e=this;e.news=[],s.getNewsList().success(function(s){e.news=s}).error(function(s){a.swal(s.error,s.summary)}),e.destroy=function(t){s.destroyNews(t).success(function(){e.news=_.reject(e.news,function(s){return t==s.id})}).error(function(s){a.swal(s.error,s.summary)})}}angular.module("donna").controller("NewsController",s),s.$inject=["News","SweetAlert"]}(),function(){"use strict";function s(){var s={restrict:"E",templateUrl:"app/components/sidebar/sidebar.html",controller:"SidebarController",controllerAs:"sidebarCtrl",bindToController:!0};return s}angular.module("donna").directive("sidebar",s)}(),function(){"use strict";function s(s,a){var e=this;e.isActive=function(a){return a==s.$$path}}angular.module("donna").controller("SidebarController",s),s.$inject=["$location","Auth"]}(),function(){"use strict";function s(){var s={restrict:"E",templateUrl:"app/components/navbar/navbar.html",controller:"NavbarController",controllerAs:"navbarCtrl",bindToController:!0};return s}angular.module("donna").directive("navbar",s)}(),function(){"use strict";function s(s){var a=this;a.logout=function(){s.logout()}}angular.module("donna").controller("NavbarController",s),s.$inject=["Auth"]}(),function(){"use strict";function s(){return{get:function(s){return localStorage.getItem(s)},set:function(s,a){return localStorage.setItem(s,a)},unset:function(s){return localStorage.removeItem(s)}}}function a(s,a,e,t,l){return{authorize:function(s){return s===e.user?this.isAuthenticated():!0},isAuthenticated:function(){return a.get("auth_token")},login:function(e){var l=s.post(t.URL+"/api/auth/login",e);return l.success(function(s){a.set("auth_token",angular.toJson(s))}),l},logout:function(){a.unset("auth_token"),l.go("anon.login")}}}function e(s,a){var e=a.get("LocalService");return{request:function(s){var a;return e.get("auth_token")&&(a=angular.fromJson(e.get("auth_token")).token),a&&(s.headers.Authorization="Bearer "+a),s},responseError:function(t){return(401===t.status||403===t.status)&&(e.unset("auth_token"),a.get("$state").go("anon.login")),s.reject(t)}}}angular.module("donna").factory("LocalService",s).factory("Auth",a).factory("AuthInterceptor",e),a.$inject=["$http","LocalService","AccessLevels","API","$state"],e.$inject=["$q","$injector"]}(),function(){"use strict";function s(s,a,e,t){var l=this;l.login=function(l){e.login(l).success(function(e){return"superadmin"!=e.user.role.name?t.swal("Forbidden","You don't have permissions to access."):(s.globalUser=e.user,void a.go("user.dashboard"))}).error(function(s){t.swal(s.error,s.summary)})}}angular.module("donna").controller("LoginController",s),s.$inject=["$rootScope","$state","Auth","SweetAlert"]}(),function(){"use strict";function s(s,a){return{getEvents:function(){return s.get(a.URL+"/api/events")}}}angular.module("donna").factory("Event",s),s.$inject=["$http","API"]}(),function(){"use strict";function s(s,a){var e=this;e.news=[],s.getEvents().success(function(s){e.events=s}).error(function(s){a.swal(s.error,s.summary)})}angular.module("donna").controller("EventController",s),s.$inject=["Event","SweetAlert"]}(),function(){"use strict";function s(s,a){return{getData:function(){return s.get(a.URL+"/api/general/dashboardData")}}}angular.module("donna").factory("Dashboard",s),s.$inject=["$http","API"]}(),function(){"use strict";function s(s,a){var e=this;s.getData().success(function(s){e.data=s}).error(function(s){a.swal(s.error,s.summary)})}angular.module("donna").controller("DashboardController",s),s.$inject=["Dashboard","SweetAlert"]}(),function(){"use strict";function s(s){var a=io.connect("http://localhost:1337",{query:"__sails_io_sdk_version=0.11.0"}),e=angular.fromJson(s.get("auth_token")).token;return{sendMsg:function(s,t){return a.emit("post",{url:"/api/message/create",data:{token:e,text:s.text}},t)}}}angular.module("donna").factory("Chat",s),s.$inject=["LocalService"]}(),function(){"use strict";function s(s,a,e,t){var l=this;l.messages=[];var r=io.connect("http://localhost:1337",{query:"__sails_io_sdk_version=0.11.0"});r.on("connect",function(){var a=angular.fromJson(t.get("auth_token")).token;console.log(a),r.emit("get",{url:"/api/message/connect",data:{token:a}},function(a){console.log(a),l.messages=a.body,s.$apply()})}),l.send=function(t){a.sendMsg(t,function(a){return 200!=a.statusCode?e.swal(a.error,a.summary):(l.messages.push(a.body),s.$apply(),void console.log(a.body))})}}angular.module("donna").controller("ChatController",s),s.$inject=["$scope","Chat","SweetAlert","LocalService"]}(),function(){"use strict";function s(s,a){console.log(a.authorize(s.data.access))}angular.module("donna").controller("MainController",s),s.$inject=["toState","Auth"]}(),function(){"use strict";function s(s){s.debug("runBlock end")}angular.module("donna").run(s),s.$inject=["$log"]}(),function(){"use strict";function s(s,a,e){s.state("anon",{"abstract":!0,template:"<ui-view/>",data:{access:e.anon}}).state("anon.login",{url:"/login",templateUrl:"app/components/login/login.html",controller:"LoginController",controllerAs:"loginCtrl"}),s.state("user",{"abstract":!0,templateUrl:"app/main/main.html",data:{access:e.user}}).state("user.dashboard",{url:"/",templateUrl:"app/components/dashboard/dashboard.html",controller:"DashboardController",controllerAs:"dashboardCtrl"}).state("user.news",{url:"/news",templateUrl:"app/components/news/news.html",controller:"NewsController",controllerAs:"newsCtrl"}).state("user.events",{url:"/events",templateUrl:"app/components/event/events.html",controller:"EventController",controllerAs:"eventCtrl"}).state("user.users",{url:"/users",templateUrl:"app/components/user/users.html",controller:"UserController",controllerAs:"userCtrl"}).state("user.chat",{url:"/chat",templateUrl:"app/components/chat/chat.html",controller:"ChatController",controllerAs:"chatCtrl"}),a.otherwise("/")}angular.module("donna").config(s),s.$inject=["$stateProvider","$urlRouterProvider","AccessLevels"]}(),function(){"use strict";angular.module("donna").constant("API",{URL:"http://52.16.220.86:667"}).constant("AccessLevels",{anon:0,user:1})}(),function(){"use strict";function s(s,a){s.debugEnabled(!0),a.interceptors.push("AuthInterceptor")}angular.module("donna").config(s),s.$inject=["$logProvider","$httpProvider"]}(),angular.module("donna").run(["$templateCache",function(s){s.put("app/main/main.html",'<navbar></navbar><sidebar></sidebar><aside class="right-side"><section class="content"><ui-view></ui-view></section></aside>'),s.put("app/components/chat/chat.html",'<div class="row"><div class="col-md-12"><ul class="breadcrumb"><li><a href="#/"><i class="fa fa-home"></i> Dashboard</a></li><li class="active">Chat</li></ul></div></div><div class="row"><div class="col-md-12"><section class="panel"><header class="panel-heading">Chat Feed</header><div class="panel-body"><ul class="media-list"><li ng-repeat="message in chatCtrl.messages" class="media"><div class="pull-left"><img src="img/26115.jpg" alt="Avatar" class="img-circle" width="64" height="64"></div><div class="media-body"><span class="text-muted pull-right"><small><em>{{ message.createdAt | date: \'yyyy-MM-dd HH:mm:ss\' }}</em></small></span> <strong>{{ message.user.email }}</strong><p>{{ message.text }}</p></div></li></ul><div class="twt-area"><form role="form" ng-submit="chatCtrl.send(message)"><textarea class="form-control" ng-model="message.text" placeholder="Share something on Twitter.." rows="3"></textarea><div class="clearfix"><button class="btn btn-sm btn-primary pull-right" type="submit"><i class="fa fa-send-o"></i> Send</button></div></form></div></div></section></div></div>'),s.put("app/components/dashboard/dashboard.html",'<div class="row" style="margin-bottom:5px;"><div class="col-md-3"><div class="sm-st clearfix"><span class="sm-st-icon st-red"><i class="fa fa-check-square-o"></i></span><div class="sm-st-info"><span>{{ dashboardCtrl.data.userNum }}</span> Total Users</div></div></div><div class="col-md-3"><div class="sm-st clearfix"><span class="sm-st-icon st-violet"><i class="fa fa-envelope-o"></i></span><div class="sm-st-info"><span>{{ dashboardCtrl.data.newsNum }}</span> Total News</div></div></div><div class="col-md-3"><div class="sm-st clearfix"><span class="sm-st-icon st-blue"><i class="fa fa-dollar"></i></span><div class="sm-st-info"><span>{{ dashboardCtrl.data.eventNum }}</span> Total Events</div></div></div><div class="col-md-3"><div class="sm-st clearfix"><span class="sm-st-icon st-green"><i class="fa fa-paperclip"></i></span><div class="sm-st-info"><span>{{ dashboardCtrl.data.mediaNum }}</span> Total Media</div></div></div></div>'),s.put("app/components/event/events.html",'<div class="row"><div class="col-md-12"><ul class="breadcrumb"><li><a href="#/"><i class="fa fa-home"></i> Dashboard</a></li><li class="active">Events</li></ul></div></div><div class="row"><div class="col-xs-12"><div class="panel"><header class="panel-heading">Events</header><div class="panel-body table-responsive"><div class="box-tools m-b-15"><div class="input-group"><input type="text" name="table_search" class="form-control input-sm pull-right" style="width: 150px;" placeholder="Search"><div class="input-group-btn"><button class="btn btn-sm btn-default"><i class="fa fa-search"></i></button></div></div></div><table class="table table-hover"><tbody><tr><th>ID</th><th>Title</th><th>Text</th><th>Date</th><th>Location</th><th>Likes</th><th>Actions</th></tr><tr ng-repeat="events in eventsCtrl.events"><td>{{ event.id }}</td><td>{{ event.title }}</td><td>{{ event.text }}</td><td>{{ event.date }}</td><td>{{ event.location }}</td><td>{{ event.likesNum }}</td><td><button class="btn btn-sm btn-danger"><i class="fa fa-remove"></i></button> <button class="btn btn-sm btn-info"><i class="fa fa-pencil-square-o"></i></button></td></tr></tbody></table></div></div></div></div>'),s.put("app/components/login/login.html",'<div class="col-lg-6"><section class="panel"><header class="panel-heading">Login Form</header><div class="panel-body"><form class="form-horizontal" role="form" ng-submit="loginCtrl.login(user)"><div class="form-group"><label for="inputEmail1" class="col-lg-2 col-sm-2 control-label">Email</label><div class="col-lg-10"><div class="input-group m-b-10"><span class="input-group-addon">@</span> <input ng-model="user.email" type="email" class="form-control" id="inputEmail1" placeholder="Email"></div><p class="help-block">Example block-level help text here.</p></div></div><div class="form-group"><label for="inputPassword1" class="col-lg-2 col-sm-2 control-label">Password</label><div class="col-lg-10"><input ng-model="user.password" type="password" class="form-control" id="inputPassword1" placeholder="Password"></div></div><div class="form-group"><div class="col-lg-offset-2 col-lg-10"><div class="checkbox"><label><input type="checkbox"> Remember me</label></div></div></div><div class="form-group"><div class="col-lg-offset-2 col-lg-10"><input type="submit" class="btn btn-info" ng-disabled="userForm.$invalid" value="Login"></div></div></form></div></section></div>'),s.put("app/components/navbar/navbar.html",'<header class="header"><a href="index.html" class="logo">Director</a><nav class="navbar navbar-static-top" role="navigation"><a href="#" class="navbar-btn sidebar-toggle" data-toggle="offcanvas" role="button"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></a><div class="navbar-right"><ul class="nav navbar-nav"><li><a href="#" ng-click="navbarCtrl.logout()">Logout</a></li><li class="dropdown messages-menu"><a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-envelope"></i> <span class="label label-success">4</span></a><ul class="dropdown-menu"><li class="header">You have 4 messages</li><li><div class="slimScrollDiv" style="position: relative; overflow: hidden; width: auto; height: 200px;"><ul class="menu" style="overflow: hidden; width: 100%; height: 200px;"><li><a href="#"><div class="pull-left"><img src="img/26115.jpg" class="img-circle" alt="User Image"></div><h4>Support Team</h4><p>Why not buy a new awesome theme?</p><small class="pull-right"><i class="fa fa-clock-o"></i> 5 mins</small></a></li><li><a href="#"><div class="pull-left"><img src="img/26115.jpg" class="img-circle" alt="user image"></div><h4>Director Design Team</h4><p>Why not buy a new awesome theme?</p><small class="pull-right"><i class="fa fa-clock-o"></i> 2 hours</small></a></li><li><a href="#"><div class="pull-left"><img src="img/avatar.png" class="img-circle" alt="user image"></div><h4>Developers</h4><p>Why not buy a new awesome theme?</p><small class="pull-right"><i class="fa fa-clock-o"></i> Today</small></a></li><li><a href="#"><div class="pull-left"><img src="img/26115.jpg" class="img-circle" alt="user image"></div><h4>Sales Department</h4><p>Why not buy a new awesome theme?</p><small class="pull-right"><i class="fa fa-clock-o"></i> Yesterday</small></a></li><li><a href="#"><div class="pull-left"><img src="img/avatar.png" class="img-circle" alt="user image"></div><h4>Reviewers</h4><p>Why not buy a new awesome theme?</p><small class="pull-right"><i class="fa fa-clock-o"></i> 2 days</small></a></li></ul><div class="slimScrollBar" style="width: 3px; position: absolute; top: 0px; opacity: 0.4; display: block; border-radius: 5px; z-index: 99; right: 1px; background: rgb(0, 0, 0);"></div><div class="slimScrollRail" style="width: 3px; height: 100%; position: absolute; top: 0px; display: none; border-radius: 5px; opacity: 0.2; z-index: 90; right: 1px; background: rgb(51, 51, 51);"></div></div></li><li class="footer"><a href="#">See All Messages</a></li></ul></li><li class="dropdown tasks-menu"><a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-tasks"></i> <span class="label label-danger">9</span></a><ul class="dropdown-menu"><li class="header">You have 9 tasks</li><li><div class="slimScrollDiv" style="position: relative; overflow: hidden; width: auto; height: 200px;"><ul class="menu" style="overflow: hidden; width: 100%; height: 200px;"><li><a href="#"><h3>Design some buttons <small class="pull-right">20%</small></h3><div class="progress progress-striped xs"><div class="progress-bar progress-bar-success" style="width: 20%" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"><span class="sr-only">20% Complete</span></div></div></a></li><li><a href="#"><h3>Create a nice theme <small class="pull-right">40%</small></h3><div class="progress progress-striped xs"><div class="progress-bar progress-bar-danger" style="width: 40%" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"><span class="sr-only">40% Complete</span></div></div></a></li><li><a href="#"><h3>Some task I need to do <small class="pull-right">60%</small></h3><div class="progress progress-striped xs"><div class="progress-bar progress-bar-info" style="width: 60%" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"><span class="sr-only">60% Complete</span></div></div></a></li><li><a href="#"><h3>Make beautiful transitions <small class="pull-right">80%</small></h3><div class="progress progress-striped xs"><div class="progress-bar progress-bar-warning" style="width: 80%" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"><span class="sr-only">80% Complete</span></div></div></a></li></ul><div class="slimScrollBar" style="width: 3px; position: absolute; top: 0px; opacity: 0.4; display: block; border-radius: 5px; z-index: 99; right: 1px; background: rgb(0, 0, 0);"></div><div class="slimScrollRail" style="width: 3px; height: 100%; position: absolute; top: 0px; display: none; border-radius: 5px; opacity: 0.2; z-index: 90; right: 1px; background: rgb(51, 51, 51);"></div></div></li><li class="footer"><a href="#">View all tasks</a></li></ul></li><li class="dropdown user user-menu"><a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-user"></i> <span>Jane Doe <i class="caret"></i></span></a><ul class="dropdown-menu dropdown-custom dropdown-menu-right"><li class="dropdown-header text-center">Account</li><li><a href="#"><i class="fa fa-clock-o fa-fw pull-right"></i> <span class="badge badge-success pull-right">10</span> Updates</a> <a href="#"><i class="fa fa-envelope-o fa-fw pull-right"></i> <span class="badge badge-danger pull-right">5</span> Messages</a> <a href="#"><i class="fa fa-magnet fa-fw pull-right"></i> <span class="badge badge-info pull-right">3</span> Subscriptions</a> <a href="#"><i class="fa fa-question fa-fw pull-right"></i> <span class="badge pull-right">11</span> FAQ</a></li><li class="divider"></li><li><a href="#"><i class="fa fa-user fa-fw pull-right"></i> Profile</a> <a data-toggle="modal" href="#modal-user-settings"><i class="fa fa-cog fa-fw pull-right"></i> Settings</a></li><li class="divider"></li><li><a href="#"><i class="fa fa-ban fa-fw pull-right"></i> Logout</a></li></ul></li></ul></div></nav></header>'),s.put("app/components/news/news.html",'<div class="row"><div class="col-md-12"><ul class="breadcrumb"><li><a href="#/"><i class="fa fa-home"></i> Dashboard</a></li><li class="active">News</li></ul></div></div><div class="row"><div class="col-xs-12"><div class="panel"><header class="panel-heading">News</header><div class="panel-body table-responsive"><div class="box-tools m-b-15"><div class="input-group"><input type="text" name="table_search" class="form-control input-sm pull-right" style="width: 150px;" placeholder="Search"><div class="input-group-btn"><button class="btn btn-sm btn-default"><i class="fa fa-search"></i></button></div></div></div><table class="table table-hover"><tbody><tr><th>ID</th><th>Title</th><th>Text</th><th>Likes</th><th>Actions</th></tr><tr ng-repeat="news in newsCtrl.news"><td>{{ news.id }}</td><td>{{ news.title }}</td><td>{{ news.text }}</td><td>{{ news.likesNum }}</td><td><button ng-click="newsCtrl.destroy(news.id)" class="btn btn-sm btn-danger"><i class="fa fa-remove"></i></button> <button class="btn btn-sm btn-info"><i class="fa fa-pencil-square-o"></i></button></td></tr></tbody></table></div></div></div></div>'),s.put("app/components/sidebar/sidebar.html",'<aside class="left-side sidebar-offcanvas" style="min-height: 1546px;"><section class="sidebar"><div class="user-panel"><div class="pull-left image"><img src="img/26115.jpg" class="img-circle" alt="User Image"></div><div class="pull-left info"><p>Hello, {{ globalUser.email }}</p><a href="#"><i class="fa fa-circle text-success"></i> Online</a></div></div><form action="#" method="get" class="sidebar-form"><div class="input-group"><input type="text" name="q" class="form-control" placeholder="Search..."> <span class="input-group-btn"><button type="submit" name="seach" id="search-btn" class="btn btn-flat"><i class="fa fa-search"></i></button></span></div></form><ul class="sidebar-menu"><li ng-class="{active: sidebarCtrl.isActive(\'/\')}"><a href="#/"><i class="fa fa-dashboard"></i> <span>Dashboard</span></a></li><li ng-class="{active: sidebarCtrl.isActive(\'/news\')}"><a href="#/news"><i class="fa fa-newspaper-o"></i> <span>News</span></a></li><li ng-class="{active: sidebarCtrl.isActive(\'/events\')}"><a href="#/events"><i class="fa fa-calendar"></i> <span>Events</span></a></li><li ng-class="{active: sidebarCtrl.isActive(\'/gallery\')}"><a href="#/gallery"><i class="fa fa-image"></i> <span>Gallery</span></a></li><li ng-class="{active: userCtrl.isActive(\'/users\')}"><a href="#/users"><i class="fa fa-users"></i> <span>Users</span></a></li><li ng-class="{active: chatCtrl.isActive(\'/chat\')}"><a href="#/chat"><i class="fa fa-comments-o"></i> <span>Chat</span></a></li></ul></section></aside>'),s.put("app/components/user/users.html",'<div class="row"><div class="col-md-12"><ul class="breadcrumb"><li><a href="#/"><i class="fa fa-home"></i> Dashboard</a></li><li class="active">Users</li></ul></div></div><div class="row"><div class="col-xs-12"><div class="panel"><header class="panel-heading">Users</header><div class="panel-body table-responsive"><div class="box-tools m-b-15"><div class="input-group"><input type="text" name="table_search" class="form-control input-sm pull-right" style="width: 150px;" placeholder="Search"><div class="input-group-btn"><button class="btn btn-sm btn-default"><i class="fa fa-search"></i></button></div></div></div><table class="table table-hover"><tbody><tr><th>ID</th><th>First name</th><th>Last name</th><th>Email</th></tr><tr ng-repeat="user in userCtrl.users"><td>{{ user.id }}</td><td>{{ user.firstName }}</td><td>{{ user.lastName }}</td><td>{{ user.email }}</td></tr></tbody></table></div></div></div></div>')}]);
//# sourceMappingURL=../maps/scripts/app-7af6905dfc.js.map
